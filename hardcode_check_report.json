{
  "total_issues": 129,
  "by_severity": {
    "high": 46,
    "medium": 37,
    "low": 46
  },
  "by_file": {
    "app\\cli\\main.py": 1,
    "app\\models\\operation_data.py": 2,
    "app\\services\\ingest\\check_mapping.py": 1,
    "app\\services\\ingest\\copy_workers.py": 3,
    "app\\services\\ingest\\run_all.py": 5,
    "app\\services\\reporting\\data_quality.py": 3,
    "app\\services\\system\\cleanup.py": 8,
    "app\\services\\ingest\\prepare_dim\\__init__.py": 1,
    "app\\core\\config\\database.py": 3,
    "app\\core\\config\\ingest.py": 2,
    "app\\core\\config\\loader.py": 29,
    "app\\core\\config\\loader_new.py": 12,
    "app\\core\\config\\logging.py": 2,
    "app\\core\\config\\logging_output.py": 2,
    "app\\core\\config\\merge.py": 1,
    "app\\core\\config\\system.py": 8,
    "app\\core\\config\\validation.py": 6,
    "app\\core\\config\\web.py": 1,
    "app\\api\\v1\\router.py": 1,
    "app\\adapters\\fs\\reader.py": 2,
    "app\\adapters\\logging\\init.py": 12,
    "analyze_data_content.py": 3,
    "analyze_db.py": 3,
    "analyze_functions.py": 3,
    "debug_merge.py": 1,
    "manual_merge.py": 3,
    "test_cli_compatibility.py": 3,
    "test_db_connection.py": 3,
    "test_new_config.py": 5
  },
  "issues": [
    {
      "file": "app\\cli\\main.py",
      "line": 442,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "_json.dumps(report, ensure_ascii=False, indent=2), encoding=\"utf-8\""
    },
    {
      "file": "app\\models\\operation_data.py",
      "line": 397,
      "type": "格式硬编码",
      "matched": "\"csv\"",
      "severity": "low",
      "content": "default=\"csv\""
    },
    {
      "file": "app\\models\\operation_data.py",
      "line": 406,
      "type": "时区硬编码",
      "matched": "'Asia/Shanghai'",
      "severity": "medium",
      "content": "description=\"时区（如 'Asia/Shanghai'）\","
    },
    {
      "file": "app\\services\\ingest\\check_mapping.py",
      "line": 62,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "data = json.loads(mapping_path.read_text(encoding=\"utf-8\"))"
    },
    {
      "file": "app\\services\\ingest\\copy_workers.py",
      "line": 73,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "data = json.loads(mapping_path.read_text(encoding=\"utf-8\"))"
    },
    {
      "file": "app\\services\\ingest\\copy_workers.py",
      "line": 300,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "batch_bytes = sum(len(line.encode(\"utf-8\")) for line in lines)"
    },
    {
      "file": "app\\services\\ingest\\copy_workers.py",
      "line": 464,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "len(line.encode(\"utf-8\")) for line in batch_lines"
    },
    {
      "file": "app\\services\\ingest\\run_all.py",
      "line": 82,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "merged = json.loads(env_path.read_text(encoding=\"utf-8\")) or {}"
    },
    {
      "file": "app\\services\\ingest\\run_all.py",
      "line": 91,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "json.dumps(merged, ensure_ascii=False, indent=2), encoding=\"utf-8\""
    },
    {
      "file": "app\\services\\ingest\\run_all.py",
      "line": 251,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "for line in perf_path.read_text(encoding=\"utf-8\").splitlines():"
    },
    {
      "file": "app\\services\\ingest\\run_all.py",
      "line": 286,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "for line in sql_path.read_text(encoding=\"utf-8\").splitlines():"
    },
    {
      "file": "app\\services\\ingest\\run_all.py",
      "line": 382,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "json.dumps(summary_dict, ensure_ascii=False, indent=2), encoding=\"utf-8\""
    },
    {
      "file": "app\\services\\reporting\\data_quality.py",
      "line": 341,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "with perf_path.open(\"r\", encoding=\"utf-8\") as f:"
    },
    {
      "file": "app\\services\\reporting\\data_quality.py",
      "line": 406,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "env_obj = json.loads(env_path.read_text(encoding=\"utf-8\"))"
    },
    {
      "file": "app\\services\\reporting\\data_quality.py",
      "line": 417,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "json.dumps(out, ensure_ascii=False, indent=2), encoding=\"utf-8\""
    },
    {
      "file": "app\\services\\system\\cleanup.py",
      "line": 321,
      "type": "目录路径硬编码",
      "matched": "\"logs\"",
      "severity": "high",
      "content": "logs_dir = Path(\"logs\")"
    },
    {
      "file": "app\\services\\system\\cleanup.py",
      "line": 321,
      "type": "目录路径硬编码",
      "matched": "Path(\"logs\"",
      "severity": "high",
      "content": "logs_dir = Path(\"logs\")"
    },
    {
      "file": "app\\services\\system\\cleanup.py",
      "line": 362,
      "type": "目录路径硬编码",
      "matched": "\"logs\"",
      "severity": "high",
      "content": "\"path\": str(Path(\"logs\")),"
    },
    {
      "file": "app\\services\\system\\cleanup.py",
      "line": 362,
      "type": "目录路径硬编码",
      "matched": "Path(\"logs\"",
      "severity": "high",
      "content": "\"path\": str(Path(\"logs\")),"
    },
    {
      "file": "app\\services\\system\\cleanup.py",
      "line": 363,
      "type": "目录路径硬编码",
      "matched": "\"logs\"",
      "severity": "high",
      "content": "\"exists\": Path(\"logs\").exists(),"
    },
    {
      "file": "app\\services\\system\\cleanup.py",
      "line": 363,
      "type": "目录路径硬编码",
      "matched": "Path(\"logs\"",
      "severity": "high",
      "content": "\"exists\": Path(\"logs\").exists(),"
    },
    {
      "file": "app\\services\\system\\cleanup.py",
      "line": 376,
      "type": "目录路径硬编码",
      "matched": "\"logs\"",
      "severity": "high",
      "content": "logs_dir = Path(\"logs\")"
    },
    {
      "file": "app\\services\\system\\cleanup.py",
      "line": 376,
      "type": "目录路径硬编码",
      "matched": "Path(\"logs\"",
      "severity": "high",
      "content": "logs_dir = Path(\"logs\")"
    },
    {
      "file": "app\\services\\ingest\\prepare_dim\\__init__.py",
      "line": 344,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "data: Dict[str, Any] = json.loads(mapping_path.read_text(encoding=\"utf-8\"))"
    },
    {
      "file": "app\\core\\config\\database.py",
      "line": 88,
      "type": "数据库主机硬编码",
      "matched": "\"localhost\"",
      "severity": "high",
      "content": "host: str = \"localhost\""
    },
    {
      "file": "app\\core\\config\\database.py",
      "line": 89,
      "type": "数据库名硬编码",
      "matched": "\"pump_station_optimization\"",
      "severity": "high",
      "content": "name: str = \"pump_station_optimization\""
    },
    {
      "file": "app\\core\\config\\database.py",
      "line": 90,
      "type": "数据库用户硬编码",
      "matched": "\"postgres\"",
      "severity": "medium",
      "content": "user: str = \"postgres\""
    },
    {
      "file": "app\\core\\config\\ingest.py",
      "line": 47,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "encoding: str = \"utf-8\""
    },
    {
      "file": "app\\core\\config\\ingest.py",
      "line": 190,
      "type": "目录路径硬编码",
      "matched": "\"data\"",
      "severity": "high",
      "content": "base_dir: str = \"data\""
    },
    {
      "file": "app\\core\\config\\loader.py",
      "line": 72,
      "type": "时区硬编码",
      "matched": "\"Asia/Shanghai\"",
      "severity": "medium",
      "content": "default_station_tz: str = \"Asia/Shanghai\""
    },
    {
      "file": "app\\core\\config\\loader.py",
      "line": 80,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "encoding: str = \"utf-8\""
    },
    {
      "file": "app\\core\\config\\loader.py",
      "line": 113,
      "type": "IP地址硬编码",
      "matched": "\"127.0.0.1\"",
      "severity": "high",
      "content": "host: str = \"127.0.0.1\""
    },
    {
      "file": "app\\core\\config\\loader.py",
      "line": 209,
      "type": "目录路径硬编码",
      "matched": "\"data\"",
      "severity": "high",
      "content": "data: str = \"data\""
    },
    {
      "file": "app\\core\\config\\loader.py",
      "line": 210,
      "type": "目录路径硬编码",
      "matched": "\"logs\"",
      "severity": "high",
      "content": "logs: str = \"logs\""
    },
    {
      "file": "app\\core\\config\\loader.py",
      "line": 212,
      "type": "目录路径硬编码",
      "matched": "\"temp\"",
      "severity": "medium",
      "content": "temp: str = \"temp\""
    },
    {
      "file": "app\\core\\config\\loader.py",
      "line": 213,
      "type": "目录路径硬编码",
      "matched": "\"backup\"",
      "severity": "medium",
      "content": "backup: str = \"backup\""
    },
    {
      "file": "app\\core\\config\\loader.py",
      "line": 228,
      "type": "时区硬编码",
      "matched": "\"Asia/Shanghai\"",
      "severity": "medium",
      "content": "default: str = \"Asia/Shanghai\""
    },
    {
      "file": "app\\core\\config\\loader.py",
      "line": 229,
      "type": "时区硬编码",
      "matched": "\"UTC\"",
      "severity": "medium",
      "content": "storage: str = \"UTC\""
    },
    {
      "file": "app\\core\\config\\loader.py",
      "line": 230,
      "type": "时区硬编码",
      "matched": "\"Asia/Shanghai\"",
      "severity": "medium",
      "content": "display: str = \"Asia/Shanghai\""
    },
    {
      "file": "app\\core\\config\\loader.py",
      "line": 245,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "encoding: str = \"utf-8\""
    },
    {
      "file": "app\\core\\config\\loader.py",
      "line": 321,
      "type": "目录路径硬编码",
      "matched": "\"data\"",
      "severity": "high",
      "content": "base_dir: str = \"data\""
    },
    {
      "file": "app\\core\\config\\loader.py",
      "line": 327,
      "type": "时区硬编码",
      "matched": "\"Asia/Shanghai\"",
      "severity": "medium",
      "content": "site_timezone: str = \"Asia/Shanghai\""
    },
    {
      "file": "app\\core\\config\\loader.py",
      "line": 394,
      "type": "数据库主机硬编码",
      "matched": "\"localhost\"",
      "severity": "high",
      "content": "host: str = \"localhost\""
    },
    {
      "file": "app\\core\\config\\loader.py",
      "line": 395,
      "type": "数据库名硬编码",
      "matched": "\"pump_station_optimization\"",
      "severity": "high",
      "content": "name: str = \"pump_station_optimization\""
    },
    {
      "file": "app\\core\\config\\loader.py",
      "line": 396,
      "type": "数据库用户硬编码",
      "matched": "\"postgres\"",
      "severity": "medium",
      "content": "user: str = \"postgres\""
    },
    {
      "file": "app\\core\\config\\loader.py",
      "line": 618,
      "type": "格式硬编码",
      "matched": "\"json\"",
      "severity": "low",
      "content": "format: str = \"json\"  # json|text"
    },
    {
      "file": "app\\core\\config\\loader.py",
      "line": 699,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "with ingest_path.open(\"r\", encoding=\"utf-8\") as f:"
    },
    {
      "file": "app\\core\\config\\loader.py",
      "line": 703,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "with logging_path.open(\"r\", encoding=\"utf-8\") as f:"
    },
    {
      "file": "app\\core\\config\\loader.py",
      "line": 707,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "with database_path.open(\"r\", encoding=\"utf-8\") as f:"
    },
    {
      "file": "app\\core\\config\\loader.py",
      "line": 782,
      "type": "目录路径硬编码",
      "matched": "\"data\"",
      "severity": "high",
      "content": "base_dir=\"data\",  # 强制固定"
    },
    {
      "file": "app\\core\\config\\loader.py",
      "line": 816,
      "type": "格式硬编码",
      "matched": "\"csv\"",
      "severity": "low",
      "content": "(ingest.get(\"csv\", {}) or {}).get("
    },
    {
      "file": "app\\core\\config\\loader.py",
      "line": 823,
      "type": "格式硬编码",
      "matched": "\"csv\"",
      "severity": "low",
      "content": "(ingest.get(\"csv\", {}) or {}).get("
    },
    {
      "file": "app\\core\\config\\loader.py",
      "line": 830,
      "type": "格式硬编码",
      "matched": "\"csv\"",
      "severity": "low",
      "content": "(ingest.get(\"csv\", {}) or {}).get("
    },
    {
      "file": "app\\core\\config\\loader.py",
      "line": 837,
      "type": "格式硬编码",
      "matched": "\"csv\"",
      "severity": "low",
      "content": "(ingest.get(\"csv\", {}) or {}).get("
    },
    {
      "file": "app\\core\\config\\loader.py",
      "line": 844,
      "type": "格式硬编码",
      "matched": "\"csv\"",
      "severity": "low",
      "content": "(ingest.get(\"csv\", {}) or {}).get("
    },
    {
      "file": "app\\core\\config\\loader.py",
      "line": 1455,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "with ingest_path.open(\"r\", encoding=\"utf-8\") as f:"
    },
    {
      "file": "app\\core\\config\\loader.py",
      "line": 1458,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "with logging_path.open(\"r\", encoding=\"utf-8\") as f:"
    },
    {
      "file": "app\\core\\config\\loader.py",
      "line": 1461,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "with database_path.open(\"r\", encoding=\"utf-8\") as f:"
    },
    {
      "file": "app\\core\\config\\loader_new.py",
      "line": 235,
      "type": "目录路径硬编码",
      "matched": "\"data\"",
      "severity": "high",
      "content": "data=str(directories.get(\"data\", \"data\")),"
    },
    {
      "file": "app\\core\\config\\loader_new.py",
      "line": 235,
      "type": "目录路径硬编码",
      "matched": "\"data\"",
      "severity": "high",
      "content": "data=str(directories.get(\"data\", \"data\")),"
    },
    {
      "file": "app\\core\\config\\loader_new.py",
      "line": 236,
      "type": "目录路径硬编码",
      "matched": "\"logs\"",
      "severity": "high",
      "content": "logs=str(directories.get(\"logs\", \"logs\")),"
    },
    {
      "file": "app\\core\\config\\loader_new.py",
      "line": 236,
      "type": "目录路径硬编码",
      "matched": "\"logs\"",
      "severity": "high",
      "content": "logs=str(directories.get(\"logs\", \"logs\")),"
    },
    {
      "file": "app\\core\\config\\loader_new.py",
      "line": 238,
      "type": "目录路径硬编码",
      "matched": "\"temp\"",
      "severity": "medium",
      "content": "temp=str(directories.get(\"temp\", \"temp\")),"
    },
    {
      "file": "app\\core\\config\\loader_new.py",
      "line": 238,
      "type": "目录路径硬编码",
      "matched": "\"temp\"",
      "severity": "medium",
      "content": "temp=str(directories.get(\"temp\", \"temp\")),"
    },
    {
      "file": "app\\core\\config\\loader_new.py",
      "line": 239,
      "type": "目录路径硬编码",
      "matched": "\"backup\"",
      "severity": "medium",
      "content": "backup=str(directories.get(\"backup\", \"backup\")),"
    },
    {
      "file": "app\\core\\config\\loader_new.py",
      "line": 239,
      "type": "目录路径硬编码",
      "matched": "\"backup\"",
      "severity": "medium",
      "content": "backup=str(directories.get(\"backup\", \"backup\")),"
    },
    {
      "file": "app\\core\\config\\loader_new.py",
      "line": 242,
      "type": "时区硬编码",
      "matched": "\"Asia/Shanghai\"",
      "severity": "medium",
      "content": "default=str(timezone.get(\"default\", \"Asia/Shanghai\")),"
    },
    {
      "file": "app\\core\\config\\loader_new.py",
      "line": 243,
      "type": "时区硬编码",
      "matched": "\"UTC\"",
      "severity": "medium",
      "content": "storage=str(timezone.get(\"storage\", \"UTC\")),"
    },
    {
      "file": "app\\core\\config\\loader_new.py",
      "line": 244,
      "type": "时区硬编码",
      "matched": "\"Asia/Shanghai\"",
      "severity": "medium",
      "content": "display=str(timezone.get(\"display\", \"Asia/Shanghai\")),"
    },
    {
      "file": "app\\core\\config\\loader_new.py",
      "line": 247,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "encoding=str(general.get(\"encoding\", \"utf-8\")),"
    },
    {
      "file": "app\\core\\config\\logging.py",
      "line": 40,
      "type": "格式硬编码",
      "matched": "\"json\"",
      "severity": "low",
      "content": "format: 日志格式 (\"json\" | \"text\")"
    },
    {
      "file": "app\\core\\config\\logging.py",
      "line": 59,
      "type": "格式硬编码",
      "matched": "\"json\"",
      "severity": "low",
      "content": "format: str = \"json\"  # json|text"
    },
    {
      "file": "app\\core\\config\\logging_output.py",
      "line": 30,
      "type": "目录路径硬编码",
      "matched": "\"logs\"",
      "severity": "high",
      "content": "base_path: str = \"logs\""
    },
    {
      "file": "app\\core\\config\\logging_output.py",
      "line": 76,
      "type": "数据库主机硬编码",
      "matched": "\"localhost\"",
      "severity": "high",
      "content": "host: str = \"localhost\""
    },
    {
      "file": "app\\core\\config\\merge.py",
      "line": 25,
      "type": "时区硬编码",
      "matched": "\"Asia/Shanghai\"",
      "severity": "medium",
      "content": "default_station_tz: str = \"Asia/Shanghai\""
    },
    {
      "file": "app\\core\\config\\system.py",
      "line": 27,
      "type": "目录路径硬编码",
      "matched": "\"data\"",
      "severity": "high",
      "content": "data: str = \"data\""
    },
    {
      "file": "app\\core\\config\\system.py",
      "line": 28,
      "type": "目录路径硬编码",
      "matched": "\"logs\"",
      "severity": "high",
      "content": "logs: str = \"logs\""
    },
    {
      "file": "app\\core\\config\\system.py",
      "line": 30,
      "type": "目录路径硬编码",
      "matched": "\"temp\"",
      "severity": "medium",
      "content": "temp: str = \"temp\""
    },
    {
      "file": "app\\core\\config\\system.py",
      "line": 31,
      "type": "目录路径硬编码",
      "matched": "\"backup\"",
      "severity": "medium",
      "content": "backup: str = \"backup\""
    },
    {
      "file": "app\\core\\config\\system.py",
      "line": 46,
      "type": "时区硬编码",
      "matched": "\"Asia/Shanghai\"",
      "severity": "medium",
      "content": "default: str = \"Asia/Shanghai\""
    },
    {
      "file": "app\\core\\config\\system.py",
      "line": 47,
      "type": "时区硬编码",
      "matched": "\"UTC\"",
      "severity": "medium",
      "content": "storage: str = \"UTC\""
    },
    {
      "file": "app\\core\\config\\system.py",
      "line": 48,
      "type": "时区硬编码",
      "matched": "\"Asia/Shanghai\"",
      "severity": "medium",
      "content": "display: str = \"Asia/Shanghai\""
    },
    {
      "file": "app\\core\\config\\system.py",
      "line": 63,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "encoding: str = \"utf-8\""
    },
    {
      "file": "app\\core\\config\\validation.py",
      "line": 184,
      "type": "时区硬编码",
      "matched": "\"Asia/Shanghai\"",
      "severity": "medium",
      "content": "valid_timezones = [\"UTC\", \"Asia/Shanghai\", \"Asia/Beijing\", \"America/New_York\", \"Europe/London\"]"
    },
    {
      "file": "app\\core\\config\\validation.py",
      "line": 184,
      "type": "时区硬编码",
      "matched": "\"UTC\"",
      "severity": "medium",
      "content": "valid_timezones = [\"UTC\", \"Asia/Shanghai\", \"Asia/Beijing\", \"America/New_York\", \"Europe/London\"]"
    },
    {
      "file": "app\\core\\config\\validation.py",
      "line": 184,
      "type": "时区硬编码",
      "matched": "\"Asia/Beijing\"",
      "severity": "medium",
      "content": "valid_timezones = [\"UTC\", \"Asia/Shanghai\", \"Asia/Beijing\", \"America/New_York\", \"Europe/London\"]"
    },
    {
      "file": "app\\core\\config\\validation.py",
      "line": 184,
      "type": "时区硬编码",
      "matched": "\"America/New_York\"",
      "severity": "medium",
      "content": "valid_timezones = [\"UTC\", \"Asia/Shanghai\", \"Asia/Beijing\", \"America/New_York\", \"Europe/London\"]"
    },
    {
      "file": "app\\core\\config\\validation.py",
      "line": 234,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "valid_encodings = [\"utf-8\", \"gbk\", \"gb2312\", \"ascii\", \"latin1\"]"
    },
    {
      "file": "app\\core\\config\\validation.py",
      "line": 308,
      "type": "格式硬编码",
      "matched": "\"json\"",
      "severity": "low",
      "content": "valid_formats = [\"json\", \"text\"]"
    },
    {
      "file": "app\\core\\config\\web.py",
      "line": 27,
      "type": "IP地址硬编码",
      "matched": "\"127.0.0.1\"",
      "severity": "high",
      "content": "host: str = \"127.0.0.1\""
    },
    {
      "file": "app\\api\\v1\\router.py",
      "line": 6,
      "type": "目录路径硬编码",
      "matched": "\"data\"",
      "severity": "high",
      "content": "api_v1_router.include_router(data.router, prefix=\"/data\", tags=[\"data\"])"
    },
    {
      "file": "app\\adapters\\fs\\reader.py",
      "line": 46,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "encoding: str = \"utf-8\","
    },
    {
      "file": "app\\adapters\\fs\\reader.py",
      "line": 59,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "if allow_bom and encoding.lower().replace(\"_\", \"-\") in (\"utf-8\", \"utf8\"):"
    },
    {
      "file": "app\\adapters\\logging\\init.py",
      "line": 127,
      "type": "目录路径硬编码",
      "matched": "\"logs\"",
      "severity": "high",
      "content": "base = base or Path(\"logs\") / \"runs\""
    },
    {
      "file": "app\\adapters\\logging\\init.py",
      "line": 127,
      "type": "目录路径硬编码",
      "matched": "Path(\"logs\"",
      "severity": "high",
      "content": "base = base or Path(\"logs\") / \"runs\""
    },
    {
      "file": "app\\adapters\\logging\\init.py",
      "line": 171,
      "type": "格式硬编码",
      "matched": "\"json\"",
      "severity": "low",
      "content": "fmt = (override_format or settings.logging.format or \"json\").lower()"
    },
    {
      "file": "app\\adapters\\logging\\init.py",
      "line": 178,
      "type": "格式硬编码",
      "matched": "\"json\"",
      "severity": "low",
      "content": "if fmt == \"json\""
    },
    {
      "file": "app\\adapters\\logging\\init.py",
      "line": 196,
      "type": "目录路径硬编码",
      "matched": "\"logs\"",
      "severity": "high",
      "content": "modules_dir = Path(\"logs\") / \"modules\""
    },
    {
      "file": "app\\adapters\\logging\\init.py",
      "line": 196,
      "type": "目录路径硬编码",
      "matched": "Path(\"logs\"",
      "severity": "high",
      "content": "modules_dir = Path(\"logs\") / \"modules\""
    },
    {
      "file": "app\\adapters\\logging\\init.py",
      "line": 212,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "handler = logging.FileHandler(path, encoding=\"utf-8\")"
    },
    {
      "file": "app\\adapters\\logging\\init.py",
      "line": 228,
      "type": "格式硬编码",
      "matched": "\"json\"",
      "severity": "low",
      "content": "ext = \"ndjson\" if fmt == \"json\" else \"log\""
    },
    {
      "file": "app\\adapters\\logging\\init.py",
      "line": 246,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "encoding=\"utf-8\","
    },
    {
      "file": "app\\adapters\\logging\\init.py",
      "line": 254,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "encoding=\"utf-8\","
    },
    {
      "file": "app\\adapters\\logging\\init.py",
      "line": 325,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "json.dumps(snapshot, ensure_ascii=False, indent=2), encoding=\"utf-8\""
    },
    {
      "file": "app\\adapters\\logging\\init.py",
      "line": 349,
      "type": "编码硬编码",
      "matched": "\"utf-8\"",
      "severity": "low",
      "content": "json.dumps(snapshot, ensure_ascii=False, indent=2), encoding=\"utf-8\""
    },
    {
      "file": "analyze_data_content.py",
      "line": 11,
      "type": "数据库主机硬编码",
      "matched": "\"localhost\"",
      "severity": "high",
      "content": "\"host\": \"localhost\","
    },
    {
      "file": "analyze_data_content.py",
      "line": 12,
      "type": "数据库名硬编码",
      "matched": "\"pump_station_optimization\"",
      "severity": "high",
      "content": "\"dbname\": \"pump_station_optimization\","
    },
    {
      "file": "analyze_data_content.py",
      "line": 13,
      "type": "数据库用户硬编码",
      "matched": "\"postgres\"",
      "severity": "medium",
      "content": "\"user\": \"postgres\","
    },
    {
      "file": "analyze_db.py",
      "line": 13,
      "type": "数据库主机硬编码",
      "matched": "\"localhost\"",
      "severity": "high",
      "content": "\"host\": \"localhost\","
    },
    {
      "file": "analyze_db.py",
      "line": 14,
      "type": "数据库名硬编码",
      "matched": "\"pump_station_optimization\"",
      "severity": "high",
      "content": "\"dbname\": \"pump_station_optimization\","
    },
    {
      "file": "analyze_db.py",
      "line": 15,
      "type": "数据库用户硬编码",
      "matched": "\"postgres\"",
      "severity": "medium",
      "content": "\"user\": \"postgres\","
    },
    {
      "file": "analyze_functions.py",
      "line": 10,
      "type": "数据库主机硬编码",
      "matched": "\"localhost\"",
      "severity": "high",
      "content": "\"host\": \"localhost\","
    },
    {
      "file": "analyze_functions.py",
      "line": 11,
      "type": "数据库名硬编码",
      "matched": "\"pump_station_optimization\"",
      "severity": "high",
      "content": "\"dbname\": \"pump_station_optimization\","
    },
    {
      "file": "analyze_functions.py",
      "line": 12,
      "type": "数据库用户硬编码",
      "matched": "\"postgres\"",
      "severity": "medium",
      "content": "\"user\": \"postgres\","
    },
    {
      "file": "debug_merge.py",
      "line": 38,
      "type": "时区硬编码",
      "matched": "'Asia/Shanghai'",
      "severity": "medium",
      "content": "(to_timestamp(rtrim(replace(split_part(sr.\"DataTime\", '.', 1), 'T', ' '), 'Z'), 'YYYY-MM-DD HH24:MI:..."
    },
    {
      "file": "manual_merge.py",
      "line": 37,
      "type": "时区硬编码",
      "matched": "'Asia/Shanghai'",
      "severity": "medium",
      "content": "cur.execute(parsed_sql, ('Asia/Shanghai',))"
    },
    {
      "file": "manual_merge.py",
      "line": 72,
      "type": "时区硬编码",
      "matched": "'Asia/Shanghai'",
      "severity": "medium",
      "content": "cur.execute(dedup_sql, ('Asia/Shanghai', start_utc, end_utc, start_utc, end_utc))"
    },
    {
      "file": "manual_merge.py",
      "line": 111,
      "type": "时区硬编码",
      "matched": "'Asia/Shanghai'",
      "severity": "medium",
      "content": "cur.execute(merge_sql, ('Asia/Shanghai', start_utc, end_utc))"
    },
    {
      "file": "test_cli_compatibility.py",
      "line": 19,
      "type": "数据库主机硬编码",
      "matched": "\"localhost\"",
      "severity": "high",
      "content": "\"host\": \"localhost\","
    },
    {
      "file": "test_cli_compatibility.py",
      "line": 20,
      "type": "数据库名硬编码",
      "matched": "\"pump_station_optimization\"",
      "severity": "high",
      "content": "\"dbname\": \"pump_station_optimization\","
    },
    {
      "file": "test_cli_compatibility.py",
      "line": 21,
      "type": "数据库用户硬编码",
      "matched": "\"postgres\"",
      "severity": "medium",
      "content": "\"user\": \"postgres\","
    },
    {
      "file": "test_db_connection.py",
      "line": 13,
      "type": "数据库主机硬编码",
      "matched": "\"localhost\"",
      "severity": "high",
      "content": "\"host\": \"localhost\","
    },
    {
      "file": "test_db_connection.py",
      "line": 14,
      "type": "数据库名硬编码",
      "matched": "\"pump_station_optimization\"",
      "severity": "high",
      "content": "\"dbname\": \"pump_station_optimization\","
    },
    {
      "file": "test_db_connection.py",
      "line": 15,
      "type": "数据库用户硬编码",
      "matched": "\"postgres\"",
      "severity": "medium",
      "content": "\"user\": \"postgres\","
    },
    {
      "file": "test_new_config.py",
      "line": 68,
      "type": "数据库主机硬编码",
      "matched": "\"localhost\"",
      "severity": "high",
      "content": "\"host\": \"localhost\","
    },
    {
      "file": "test_new_config.py",
      "line": 69,
      "type": "数据库名硬编码",
      "matched": "\"pump_station_optimization\"",
      "severity": "high",
      "content": "\"name\": \"pump_station_optimization\","
    },
    {
      "file": "test_new_config.py",
      "line": 70,
      "type": "数据库用户硬编码",
      "matched": "\"postgres\"",
      "severity": "medium",
      "content": "\"user\": \"postgres\","
    },
    {
      "file": "test_new_config.py",
      "line": 86,
      "type": "IP地址硬编码",
      "matched": "\"127.0.0.1\"",
      "severity": "high",
      "content": "\"host\": \"127.0.0.1\","
    },
    {
      "file": "test_new_config.py",
      "line": 87,
      "type": "Web端口硬编码",
      "matched": ": 8000",
      "severity": "high",
      "content": "\"port\": 8000,"
    }
  ]
}