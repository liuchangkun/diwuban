<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>83种特性曲线拟合展示 - 多算法对比分析工具</title>

    <!-- 外部依赖 -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <!-- 共享资源 -->
    <link rel="stylesheet" href="../共享资源/common-styles.css">
    <script src="../共享资源/common-utils.js"></script>

    <!-- 曲线展示专用资源 -->
    <link rel="stylesheet" href="./curves-showcase-styles.css">
    <script src="./curves-showcase-core.js"></script>
</head>

<body>
    <div class="container">
        <!-- 页面头部 -->
        <div class="header">
            <h1>
                📊 83种特性曲线拟合展示
                <span class="status-badge status-online">系统在线</span>
                <span class="status-badge status-optimizing">分析中</span>
            </h1>
            <div class="header-info">
                <div class="curve-metrics">
                    <div class="metric-item">
                        <i class="fas fa-chart-line"></i>
                        <span>曲线总数: 83种</span>
                    </div>
                    <div class="metric-item">
                        <i class="fas fa-brain"></i>
                        <span>算法: 7种并行</span>
                    </div>
                    <div class="metric-item">
                        <i class="fas fa-target"></i>
                        <span>平均R²: 0.89</span>
                    </div>
                    <div class="metric-item">
                        <i class="fas fa-trophy"></i>
                        <span>优秀率: 82%</span>
                    </div>
                </div>
                <div class="header-actions">
                    <button class="btn btn-primary" onclick="CurvesShowcase.exportReport()">
                        <i class="fas fa-download"></i> 导出报告
                    </button>
                    <button class="btn btn-secondary" onclick="CurvesShowcase.refreshAnalysis()">
                        <i class="fas fa-sync"></i> 刷新分析
                    </button>
                </div>
            </div>
        </div>

        <!-- 分析控制面板 -->
        <div class="analysis-control-panel">
            <div class="control-header">
                <h2>🎯 智能分析控制中心</h2>
                <div class="view-modes">
                    <button class="mode-btn active" data-mode="overview"
                        onclick="CurvesShowcase.switchViewMode('overview')">
                        🗺️ 概览
                    </button>
                    <button class="mode-btn" data-mode="comparison"
                        onclick="CurvesShowcase.switchViewMode('comparison')">
                        🔀 对比
                    </button>
                    <button class="mode-btn" data-mode="analysis" onclick="CurvesShowcase.switchViewMode('analysis')">
                        🔍 分析
                    </button>
                    <button class="mode-btn" data-mode="performance"
                        onclick="CurvesShowcase.switchViewMode('performance')">
                        🏆 性能
                    </button>
                </div>
            </div>

            <!-- 筛选控制区域 -->
            <div class="filter-controls">
                <div class="filter-group">
                    <label class="filter-label">🔍 曲线搜索</label>
                    <input type="text" class="filter-input" id="searchInput" placeholder="搜索曲线名称或类型...">
                </div>
                <div class="filter-group">
                    <label class="filter-label">⚙️ 算法筛选</label>
                    <div class="algorithm-selector">
                        <span class="algorithm-tag active" data-algorithm="all">全部</span>
                        <span class="algorithm-tag" data-algorithm="neural_network">神经网络</span>
                        <span class="algorithm-tag" data-algorithm="random_forest">随机森林</span>
                        <span class="algorithm-tag" data-algorithm="gaussian_process">高斯过程</span>
                        <span class="algorithm-tag" data-algorithm="polynomial">多项式</span>
                    </div>
                </div>
                <div class="filter-group">
                    <label class="filter-label">📊 精度筛选</label>
                    <div class="accuracy-selector">
                        <span class="accuracy-tag active" data-accuracy="all">全部</span>
                        <span class="accuracy-tag" data-accuracy="excellent">优秀(≥0.9)</span>
                        <span class="accuracy-tag" data-accuracy="good">良好(0.8-0.9)</span>
                        <span class="accuracy-tag" data-accuracy="average">一般(<0.8)< /span>
                    </div>
                </div>
                <div class="filter-group">
                    <label class="filter-label">📂 曲线分类</label>
                    <select class="filter-select" id="categoryFilter">
                        <option value="all">全部分类</option>
                        <option value="basic">基础泵特性</option>
                        <option value="electrical">电气特性</option>
                        <option value="coordination">泵组协调</option>
                        <option value="temperature">温度相关</option>
                        <option value="vibration">振动特性</option>
                    </select>
                </div>
            </div>

            <!-- 算法性能对比表 -->
            <div class="algorithm-performance-summary">
                <div class="performance-header">
                    <h3>🏆 算法性能总览</h3>
                    <div class="performance-controls">
                        <select id="performanceMetric">
                            <option value="r2">精度 (R²)</option>
                            <option value="speed">速度 (ms)</option>
                            <option value="memory">内存 (MB)</option>
                            <option value="success_rate">成功率 (%)</option>
                        </select>
                        <button class="btn btn-sm btn-primary" onclick="CurvesShowcase.updatePerformanceView()">
                            📊 更新视图
                        </button>
                    </div>
                </div>
                <div class="performance-grid" id="performanceGrid">
                    <!-- 性能数据将动态生成 -->
                </div>
            </div>
        </div>

        <!-- 主内容区域 -->
        <div class="main-content">
            <!-- 统计概览面板 -->
            <div class="statistics-panel">
                <div class="panel-title">
                    📊 曲线拟合统计概览
                    <div class="panel-actions">
                        <button class="btn btn-sm btn-secondary" onclick="CurvesShowcase.refreshStatistics()">
                            <i class="fas fa-sync"></i> 刷新
                        </button>
                    </div>
                </div>
                <div class="statistics-grid">
                    <div class="stat-card excellent">
                        <div class="stat-header">
                            <i class="fas fa-chart-line"></i>
                            <span>曲线总数</span>
                        </div>
                        <div class="stat-value">83</div>
                        <div class="stat-trend trend-stable">完整覆盖</div>
                    </div>
                    <div class="stat-card excellent">
                        <div class="stat-header">
                            <i class="fas fa-target"></i>
                            <span>平均精度</span>
                        </div>
                        <div class="stat-value">0.89</div>
                        <div class="stat-trend trend-up">↗ +31%</div>
                    </div>
                    <div class="stat-card good">
                        <div class="stat-header">
                            <i class="fas fa-trophy"></i>
                            <span>优秀曲线</span>
                        </div>
                        <div class="stat-value">68</div>
                        <div class="stat-trend trend-excellent">82%</div>
                    </div>
                    <div class="stat-card excellent">
                        <div class="stat-header">
                            <i class="fas fa-brain"></i>
                            <span>算法类型</span>
                        </div>
                        <div class="stat-value">7</div>
                        <div class="stat-trend trend-good">并行优化</div>
                    </div>
                </div>
            </div>

            <!-- 曲线展示区域 -->
            <div class="curves-showcase-area">
                <!-- 左侧曲线导航树 -->
                <div class="curves-sidebar">
                    <div class="sidebar-header">
                        <h3>🌳 曲线导航树</h3>
                        <div class="sidebar-actions">
                            <button class="btn btn-sm btn-primary" onclick="CurvesShowcase.expandAll()">
                                <i class="fas fa-expand"></i> 展开
                            </button>
                            <button class="btn btn-sm btn-secondary" onclick="CurvesShowcase.collapseAll()">
                                <i class="fas fa-compress"></i> 收起
                            </button>
                        </div>
                    </div>
                    <div class="curve-tree" id="curveTree">
                        <!-- 曲线树将动态生成 -->
                    </div>
                </div>

                <!-- 主展示区域 -->
                <div class="curves-main">
                    <div class="main-header">
                        <h3 id="mainTitle">📊 曲线对比分析</h3>
                        <div class="main-actions">
                            <button class="btn btn-primary" onclick="CurvesShowcase.exportCurveData()">
                                <i class="fas fa-download"></i> 导出
                            </button>
                            <button class="btn btn-secondary" onclick="CurvesShowcase.saveCurveImage()">
                                <i class="fas fa-image"></i> 保存
                            </button>
                            <button class="btn btn-success" onclick="CurvesShowcase.generateAnalysisReport()">
                                <i class="fas fa-file-alt"></i> 报告
                            </button>
                        </div>
                    </div>

                    <!-- 曲线对比展示区 -->
                    <div class="curve-comparison-area">
                        <!-- 对比控制 -->
                        <div class="comparison-controls">
                            <div class="control-group">
                                <label>曲线类型:</label>
                                <select id="curveTypeSelect">
                                    <option value="hq">扬程-流量 (H-Q)</option>
                                    <option value="eq">效率-流量 (η-Q)</option>
                                    <option value="pq">功率-流量 (P-Q)</option>
                                    <option value="hf">扬程-频率 (H-f)</option>
                                </select>
                            </div>
                            <div class="control-group">
                                <label>显示模式:</label>
                                <select id="displayMode">
                                    <option value="overlay">叠加显示</option>
                                    <option value="split">分离显示</option>
                                    <option value="difference">差异分析</option>
                                </select>
                            </div>
                            <div class="control-group">
                                <label>数据点数:</label>
                                <input type="range" id="dataPointsSlider" min="10" max="100" value="50">
                                <span id="dataPointsValue">50</span>
                            </div>
                        </div>

                        <!-- 主图表区域 -->
                        <div class="chart-area">
                            <canvas id="mainComparisonChart"></canvas>
                        </div>

                        <!-- 曲线指标 -->
                        <div class="curve-metrics" id="curveMetrics">
                            <!-- 指标将动态显示 -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 深度分析面板 -->
        <div class="deep-analysis-panels">
            <!-- 算法详细对比 -->
            <div class="panel algorithm-comparison">
                <div class="panel-title">
                    🧠 算法详细对比分析
                    <div class="panel-actions">
                        <select id="comparisonMetric">
                            <option value="accuracy">精度对比</option>
                            <option value="speed">速度对比</option>
                            <option value="stability">稳定性对比</option>
                            <option value="convergence">收敛性对比</option>
                        </select>
                    </div>
                </div>
                <div class="algorithm-comparison-grid">
                    <div class="comparison-chart">
                        <canvas id="algorithmComparisonChart"></canvas>
                    </div>
                    <div class="algorithm-rankings">
                        <div class="ranking-item best">
                            <div class="ranking-position">🥇</div>
                            <div class="algorithm-info">
                                <div class="algorithm-name">神经网络</div>
                                <div class="algorithm-score">R² = 0.943</div>
                            </div>
                        </div>
                        <div class="ranking-item good">
                            <div class="ranking-position">🥈</div>
                            <div class="algorithm-info">
                                <div class="algorithm-name">随机森林</div>
                                <div class="algorithm-score">R² = 0.891</div>
                            </div>
                        </div>
                        <div class="ranking-item average">
                            <div class="ranking-position">🥉</div>
                            <div class="algorithm-info">
                                <div class="algorithm-name">高斯过程</div>
                                <div class="algorithm-score">R² = 0.876</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 精度分布分析 -->
            <div class="panel accuracy-distribution">
                <div class="panel-title">
                    🎯 精度分布分析
                    <div class="panel-actions">
                        <button class="btn btn-sm btn-primary" onclick="CurvesShowcase.analyzeAccuracyDistribution()">
                            <i class="fas fa-chart-bar"></i> 详细分析
                        </button>
                    </div>
                </div>
                <div class="accuracy-analysis-grid">
                    <div class="distribution-chart">
                        <canvas id="accuracyDistributionChart"></canvas>
                    </div>
                    <div class="distribution-summary">
                        <div class="summary-stat">
                            <div class="stat-label">最高精度</div>
                            <div class="stat-value excellent">0.943</div>
                            <div class="stat-detail">神经网络算法</div>
                        </div>
                        <div class="summary-stat">
                            <div class="stat-label">平均精度</div>
                            <div class="stat-value good">0.867</div>
                            <div class="stat-detail">所有算法平均</div>
                        </div>
                        <div class="summary-stat">
                            <div class="stat-label">标准差</div>
                            <div class="stat-value">0.067</div>
                            <div class="stat-detail">精度波动较小</div>
                        </div>
                        <div class="summary-stat">
                            <div class="stat-label">优秀率</div>
                            <div class="stat-value excellent">78/83</div>
                            <div class="stat-detail">94% 高质量</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 数据来源追溯面板 -->
        <div class="panel data-traceability">
            <div class="panel-title">
                🔍 数据来源追溯分析
                <div class="panel-actions">
                    <button class="btn btn-sm btn-primary" onclick="CurvesShowcase.showDataMap()">
                        🗺️ 数据地图
                    </button>
                    <button class="btn btn-sm btn-secondary" onclick="CurvesShowcase.validateQuality()">
                        ✅ 质量验证
                    </button>
                </div>
            </div>
            <div class="traceability-content">
                <div class="data-source-info">
                    <h4>📊 数据源信息</h4>
                    <div class="source-details">
                        <div class="source-item">
                            <span class="source-label">数据时间范围:</span>
                            <span class="source-value">2023.01 - 2024.09</span>
                        </div>
                        <div class="source-item">
                            <span class="source-label">采样频率:</span>
                            <span class="source-value">1分钟/次</span>
                        </div>
                        <div class="source-item">
                            <span class="source-label">数据总量:</span>
                            <span class="source-value">2.47M 条记录</span>
                        </div>
                        <div class="source-item">
                            <span class="source-label">质量评分:</span>
                            <span class="source-value excellent">94.2%</span>
                        </div>
                    </div>
                </div>
                <div class="quality-metrics">
                    <div class="quality-item excellent">
                        <div class="quality-value">96.8%</div>
                        <div class="quality-label">数据完整性</div>
                    </div>
                    <div class="quality-item good">
                        <div class="quality-value">89.2%</div>
                        <div class="quality-label">测量精度</div>
                    </div>
                    <div class="quality-item warning">
                        <div class="quality-value">73.5%</div>
                        <div class="quality-label">稳态占比</div>
                    </div>
                    <div class="quality-item excellent">
                        <div class="quality-value">99.1%</div>
                        <div class="quality-label">系统可用性</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 拟合过程详情面板 -->
        <div class="panel fitting-process-details">
            <div class="panel-title">
                ⚙️ 拟合过程详情与算法解释
                <div class="panel-actions">
                    <button class="btn btn-sm btn-primary" onclick="CurvesShowcase.showFittingDetails()">
                        🔬 详细过程
                    </button>
                    <button class="btn btn-sm btn-success" onclick="CurvesShowcase.exportFittingReport()">
                        📋 过程报告
                    </button>
                </div>
            </div>
            <div class="fitting-process-content">
                <div class="process-timeline">
                    <div class="timeline-step completed">
                        <div class="step-marker">1</div>
                        <div class="step-info">
                            <div class="step-title">数据预处理</div>
                            <div class="step-description">异常值检测、数据清洗、特征提取</div>
                            <div class="step-status">✅ 完成</div>
                        </div>
                    </div>
                    <div class="timeline-step completed">
                        <div class="step-marker">2</div>
                        <div class="step-info">
                            <div class="step-title">算法选择</div>
                            <div class="step-description">基于数据特征自动选择最优算法</div>
                            <div class="step-status">✅ 完成</div>
                        </div>
                    </div>
                    <div class="timeline-step active">
                        <div class="step-marker">3</div>
                        <div class="step-info">
                            <div class="step-title">模型训练</div>
                            <div class="step-description">多算法并行训练，交叉验证</div>
                            <div class="step-status">🔄 进行中</div>
                        </div>
                    </div>
                    <div class="timeline-step pending">
                        <div class="step-marker">4</div>
                        <div class="step-info">
                            <div class="step-title">结果验证</div>
                            <div class="step-description">物理约束检验、精度评估</div>
                            <div class="step-status">⏳ 待处理</div>
                        </div>
                    </div>
                </div>

                <!-- 算法说明 -->
                <div class="algorithm-explanations">
                    <h4>🧠 算法选择原理</h4>
                    <div class="explanation-grid">
                        <div class="explanation-item">
                            <div class="algorithm-icon">🧠</div>
                            <div class="algorithm-details">
                                <h5>神经网络</h5>
                                <p>适用于复杂非线性关系，具有强大的函数逼近能力，特别适合处理高维度特征的曲线拟合。</p>
                                <div class="algorithm-metrics">
                                    <span class="metric">精度: 高</span>
                                    <span class="metric">速度: 中等</span>
                                    <span class="metric">适用性: 广泛</span>
                                </div>
                            </div>
                        </div>
                        <div class="explanation-item">
                            <div class="algorithm-icon">🌳</div>
                            <div class="algorithm-details">
                                <h5>随机森林</h5>
                                <p>集成学习方法，具有良好的泛化能力和抗过拟合特性，特别适合处理中等规模的数据集。</p>
                                <div class="algorithm-metrics">
                                    <span class="metric">精度: 中高</span>
                                    <span class="metric">速度: 快</span>
                                    <span class="metric">稳定性: 高</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 物理约束验证面板 -->
        <div class="panel physics-constraints">
            <div class="panel-title">
                ⚗️ 物理约束验证与机理分析
                <div class="panel-actions">
                    <button class="btn btn-sm btn-primary" onclick="CurvesShowcase.showPhysicsAnalysis()">
                        🔬 物理分析
                    </button>
                </div>
            </div>
            <div class="physics-content">
                <div class="constraint-checks">
                    <h4>📏 物理约束检查结果</h4>
                    <div class="checks-grid">
                        <div class="check-item passed">
                            <i class="fas fa-check-circle"></i>
                            <div class="check-info">
                                <div class="check-name">扬程单调性</div>
                                <div class="check-result">✅ 通过 (100%)</div>
                            </div>
                        </div>
                        <div class="check-item passed">
                            <i class="fas fa-check-circle"></i>
                            <div class="check-info">
                                <div class="check-name">效率范围</div>
                                <div class="check-result">✅ 通过 (100%)</div>
                            </div>
                        </div>
                        <div class="check-item passed">
                            <i class="fas fa-check-circle"></i>
                            <div class="check-info">
                                <div class="check-name">能量平衡</div>
                                <div class="check-result">✅ 通过 (98.7%)</div>
                            </div>
                        </div>
                        <div class="check-item warning">
                            <i class="fas fa-exclamation-triangle"></i>
                            <div class="check-info">
                                <div class="check-name">相似定律</div>
                                <div class="check-result">⚠️ 警告 (94.2%)</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 机理分析结果 -->
                <div class="mechanism-analysis">
                    <h4>⚙️ 泵机理分析结果</h4>
                    <div class="mechanism-summary">
                        <div class="mechanism-item">
                            <div class="mechanism-title">水力损失模型</div>
                            <div class="mechanism-value">H_loss = 0.02Q² + 0.005√H</div>
                            <div class="mechanism-quality excellent">拟合优秀</div>
                        </div>
                        <div class="mechanism-item">
                            <div class="mechanism-title">比转速特征</div>
                            <div class="mechanism-value">ns = 85.6 (中比转速泵)</div>
                            <div class="mechanism-quality good">特征明确</div>
                        </div>
                        <div class="mechanism-item">
                            <div class="mechanism-title">最佳效率点</div>
                            <div class="mechanism-value">Q_opt = 245 m³/h, η_max = 89.3%</div>
                            <div class="mechanism-quality excellent">位置准确</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 实时监控面板 -->
        <div class="panel realtime-monitoring">
            <div class="panel-title">
                📡 实时拟合监控
                <div class="panel-actions">
                    <div class="monitoring-status">
                        <span class="status-indicator active"></span>
                        <span>监控中</span>
                    </div>
                    <button class="btn btn-sm btn-secondary" onclick="CurvesShowcase.pauseMonitoring()">
                        <i class="fas fa-pause"></i> 暂停
                    </button>
                </div>
            </div>
            <div class="monitoring-content">
                <div class="monitoring-metrics">
                    <div class="metric-item">
                        <div class="metric-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="metric-info">
                            <div class="metric-label">拟合速度</div>
                            <div class="metric-value">2.3 曲线/秒</div>
                        </div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-icon">
                            <i class="fas fa-memory"></i>
                        </div>
                        <div class="metric-info">
                            <div class="metric-label">内存使用</div>
                            <div class="metric-value">1.2 GB</div>
                        </div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-icon">
                            <i class="fas fa-microchip"></i>
                        </div>
                        <div class="metric-info">
                            <div class="metric-label">CPU使用率</div>
                            <div class="metric-value">68%</div>
                        </div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-icon">
                            <i class="fas fa-database"></i>
                        </div>
                        <div class="metric-info">
                            <div class="metric-label">数据吞吐</div>
                            <div class="metric-value">450 MB/s</div>
                        </div>
                    </div>
                </div>
                <div class="realtime-chart">
                    <canvas id="realtimeMonitorChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- 初始化脚本 -->
    <script>
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function () {
            // 初始化曲线展示系统
            CurvesShowcase.init();
        });
    </script>
</body>

</html>
