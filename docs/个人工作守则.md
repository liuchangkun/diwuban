# 个人工作守则（与仓库规范联动）

适用对象：本仓库内的 AI 助手/开发者日常改动流程

一、修改前（准备）

- Why/What/Impact/Risk/Rollback 必填，列出受影响对象清单（文件/函数）
- 引用规范：程序工作流程/日志规范与运维/表结构与数据库/数据库函数参考/行为控制
- 建立任务清单：调查→实施→验证→文档/PLAYBOOKS 同步

二、修改中（执行）

- 最小改动与逐步验证；跨文件分步提交
- 不触碰 venv/ 与 data/；不改包清单；依赖变更需授权并用包管理器
- 高风险守卫：未授权的部署/迁移/删除/写生产数据/DB DSN 覆盖一律拒绝；数据库/日志配置仅可改 YAML，不得通过 ENV/CLI 覆盖

三、修改后（验证）

- 单测/静态检查/最小 E2E（命令、cwd、退出码、关键日志）
- 成功标准：Exit=0；env.json 含 args_summary/config_snapshot/sources/ts/run_id/run_dir；日志可检索
- 失败≤2 次小步修复，仍失败则暂停并请求决策

四、同步（审计）

- 更新 PLAYBOOKS（决策/配置变更/错误与修复/经验教训）
- 保存关键记忆；同步 docs 并在导航可达

五、PR 准入

- 勾选严格模式核对 + E2E 验证与产物；附最小窗口命令与 2–3 行代表性日志
- Commit/分支命名规范，变更目的/范围/影响清晰

六、性能与边界

- 预算与 SLO（如窗口段合并耗时与 P95）
- 异常提供 cost_ms/affected_rows/EXPLAIN 线索

七、互动

- 不确定/多解先澄清；阻塞>2次必须汇报
