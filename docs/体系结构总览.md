# 体系结构总览

> 本文以数据库与 scripts/sql 为唯一事实源；如与其它文档冲突，以本文件与数据库脚本为准。

- 组件与分层：PostgreSQL 16 / public, reporting, monitoring, api
- 数据流：CSV → staging → 校验/UPSERT → fact_measurements（UTC 秒级对齐）→ MV（hourly/daily）
- 调度：APScheduler（应用内跨平台，不使用 Windows 计划任务）
- 观测：pg_stat_statements 快照、命中率审计（v_mv_hit_audit）、活跃分区与索引审计
- 回滚：禁用 APScheduler 作业；DROP MV/函数（按依赖顺序）

详见：docs/架构落地计划_v1.md（章节 32/33/34/35/37）
