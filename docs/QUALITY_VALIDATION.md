# QUALITY_VALIDATION（数据质量与校验）

## 1. 基础校验
- 合理范围：为每 metric 设置硬/软阈（软阈告警、硬阈置 NULL）。
- 非递减：累计量（kWh、累计流量）必须非递减；下降标注复位/换表并切段。
- 缺失：统计缺失率，超阈（默认 30%）的区段在拟合/优化中剔除。
- 离群：IQR/MAD 或滑窗 z-score 标记；保留原值但记录质量标签。

## 2. 交叉校验
- 电功率：S≈√3·U·I，P≈S·PF；U/I/P/PF 一致性检查。
- 水力功率：P_h=ρgQH 与电功率（扣效率）对比。
- 积分一致性：ΔkWh/Δ累计流量 vs 瞬时功率/流量积分。

## 3. 报告与审计
- 每阶段输出质量报告：输入范围、缺失率、离群数、异常摘要、告警。
- 日志包含 run_id/version/station/device/metric/time_range/row_count。
