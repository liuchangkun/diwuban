---
description: 会话参数与一致性（sql_mode、names utf8mb4、time_zone、类型/精度一致性）
---
# 会话参数与一致性

## 必设
- `SET NAMES utf8mb4`；`sql_mode` 启用严格模式（建议：`STRICT_TRANS_TABLES,NO_ZERO_DATE,NO_ZERO_IN_DATE,ERROR_FOR_DIVISION_BY_ZERO`）。
- 禁止修改 `time_zone`（统一处理）。

## 类型与精度一致性
- 写入前按 [32] 精度进行舍入；DECIMAL 精度与范围统一；
- 避免隐式转换导致索引失效（例如字符串与日期/数值混用）。

## 参数快照（示例）
```json
{"sql_mode":"STRICT_TRANS_TABLES,...","names":"utf8mb4","time_zone":"SYSTEM"}
```

## 隔离与一致性
- 不允许在同任务中随意切换隔离级别；跨连接保持一致配置；
- 任务启动打印会话参数快照（脱敏），便于回溯；与 10 的日志上下文合并。