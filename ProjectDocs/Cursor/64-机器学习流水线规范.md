---
description: 机器学习流水线规范（数据版本化、特征注册、训练/评测/服务一致性、回滚）
---
# 机器学习流水线规范

## 数据与特征
- 数据版本化：样本来源、时间窗、清洗/筛选规则、特征版本（feature_version）。
- 特征注册：`features/feature_registry.py` 统一登记；每个特征含签名（输入字段/单位/范围/缺省策略）。
- 训练/线上对齐：训练与线上使用的特征字典/单位/归一化参数一致；保存 `scaler.json`。

## 训练与评测
- 数据切分：时间切分/阻断泄漏；k-fold 或时序验证；
- 指标：回归（RMSE/MAE/MAPE/R²）、分类（AUC/F1/Recall/Precision）；保留置信区间。
- 过拟合防护：早停、正则化、特征选择、数据增强（仅离线）。

## 模型产物与回滚
- 产物：`models/<task>/<version>/model.bin` + `metadata.json`（见 61）。
- 回滚：保留 N 个版本（≥5），支持 `latest` 指针；A/B 验证不达标自动回退。

## 一致性与安全
- 线上服务接口固定：输入字段、单位与范围严格校验；异常走降级策略。
- 隐私与合规：仅使用授权数据；日志与导出脱敏（参见 10/56）。